
<div style="margin: 20px" class="container-search-bar">
  <%= form_tag(projects_path, method: "get", remote: true, class: 'address-form') do %>
    <%= text_field_tag(:address,nil,class: "search-input", placeholder: 'OÃ¹ ?', value: params[:address]) %>
    <%= text_field_tag :start_time, params[:start_time], id: "date-picker", class: " search-input pl-3 mx-1", placeholder: 'Quand ?' %>
    <%= select_tag(:category, options_for_select(Project::PROJECTCATEGORY, params[:category]), class: "search-input pl-2") %>
    <%= submit_tag %>
  <% end %>
  <% if @projects.present? %>
    <div id=toggle-button-group>
      <p class="m-0 p-0 mr-1">Afficher la carte</p>
      <label class="switch m-0 p-0">
        <input type="checkbox" id="map-switch">
        <span class="slider round"></span>
      </label>
    </div>
  <% end %>
</div>

<div style="display: flex;" id="main-container">

  <div
    style="margin: 20px"
    class="container-cards-2">
    <%= render "cards_index", projects: @projects %>
  </div>

  <% if @projects.empty? %>
    <div style="height: 600px;"></div>
  <% else %>
    <div
      id="map"
      style="
        height: 600px;
        position: sticky;
        top: 0;
        margin-top: 20px;
      "
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
    ></div>
  <% end %>
</div>




